# 描画オブジェクトとマネージャ - Render object and manager

## 概要
三次元空間に配置されたオブジェクトを表現し描画するための一つの方法として、
「描画オブジェクト」について説明します。


### 描画オブジェクト
３次元空間に配置されたなんらかのオブジェクトを描画するには、
描画対象の位置や回転、スケーリングといった、いくつかの情報が必要となります。
また、それらの情報を保持するための変数や座標変換行列の変数が必要になります。

筆者は描画に必要な多くの変数をあらかじめ持ったオブジェクトを
「描画オブジェクト」として共通して管理するようにしています。
共通にすることで、次の項から説明するような機能をシステムの各所から利用可能になります。
多くの場合はタスクから利用されます。

なお、描画オブジェクトに持たせる情報は開発するゲームの特性に合わせて
積極的にカスタマイズしてよいと考えています。

### オブジェクト・プーリング
描画オブジェクトの生成解放はオブジェクト・プーリングで行います。
つまり、必要に応じて生成解放するのではなく、ゲーム開始時に一度にまとめて
生成し、ゲーム中では何度も同じオブジェクトを再利用します。
これにより実行時のメモリ確保を減らすとともに、ガーベージコレクションにより実行が
不安定になることを防ぐのです。

### レイヤー管理
ゲームでは多くの場合、描画処理は何回かの段階に分けて実行されます。
例えば、まず背景をまとめて描画し、その後、前景をまとめて描画するというようなことをします。  
レイヤーは、まとめて描画するオブジェクトを管理するための機能です。

### 奥行きソート
半透明オブジェクトを奥から順に描画するために、カメラから見た奥行きでソートする
ための機能です。ソートはレイヤー単位で行います。

### 描画オブジェクトマネージャ
ここまで説明した機能をクラスとしてまとめたものです。

サンプル用に描画オブジェクトの簡易な行列計算も含めてありますが、
開発するゲームの特性に合わせて別に実装したほうが良いでしょう。


## 関連情報
- [オブジェクトアニメーションデータの作成](../object_animation_converter/) 
- [モデルの描画](../basic_model_drawing/)
